{% extends "database/base.html" %}
{% block content %}
    <br><br>

    <div class="card">
        <div class="card-body">
          <h5 class="card-title">Welcome to the Virginia Solar Database</h5>
          <p class="card-text">This database provides a comprehensive summary of large-scale solar projects proposed for siting approval at the local level in Virginia. The 
            purpose is to provide information on the status of local permitting, details about project characteristics and attributes, and to provide a
            mechanism to link and track projects across local, state, and interconnection permitting. While the information we have compiled is all already publicly available, this is the stateâ€™s first and only comprehensive source of the data provided.  
            <br><br>
            The datapoints collected were sourced from local government archives, Virginia Department of Environmental Quality permitting records, State Corporation Commission 
            docket records, Energy Information Administration (EIA) data, PJM Queue data, and various press, utility, industry/developer, and stakeholder media. This data has been collected and vetted to the best of our ability; however, we recognize there may be errors. The database is a living document that will be updated 
            at least quarterly.
            <br><br>
            To learn more about how stakeholder engagement informed the project, data collection methodology, and details about the datapoints collected, please visit our <a href="/about">About</a> page. 
            <br><br>
            If you find errors in the data or project omissions, have any questions, or would like to sponsor this project to ensure its ongoing success, contact Elizabeth Marshall, 
            Senior Program Manager, Weldon Cooper Center at UVA, <a href="mailto:emm2t@virginia.edu">emm2t@virginia.edu</a>.
          </p>
        </div>
      </div>

    <br><br>

    {{ data|json_script:"data_json" }}

    <div class="container">
        <div class="row" style="background-color:#F1F1EF">
          <div class="col">
            <div style="line-height: 135%"><br></div>
            <h5>Explore Solar Projects</h5>in Virginia

            <div style="line-height: 185%"><br></div>
            
            <div class="search-box">
                <input type="text" class="form-control" style="font-size: 13px; width: 240px; height: 30px; text-align: left; border: 0.8px solid #000000; background-color: #ffffff;" placeholder="Search by Project Name">
            </div>

            <div style="line-height: 75%"><br></div>

            <div class="dropdown">
                <button class="btn btn-sm dropdown-toggle" style="width: 240px; text-align: left; border: 0.8px solid #000000; background-color: #ffffff;" data-toggle="dropdown">
                    &#160; Locality
                </button>
                <div class="dropdown-menu p-2" style="width: 240px;">
                    <div style="width: 215px; height: 200px; overflow-y: scroll;">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="accomack">
                            <label class="form-check-label button-font" for="accomack">
                                Accomack
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="albemarle">
                            <label class="form-check-label button-font" for="albemarle">
                                Albemarle
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="alberta">
                            <label class="form-check-label button-font" for="alberta">
                                Alberta
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="amelia">
                            <label class="form-check-label button-font" for="amelia">
                                Amelia
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="amherst">
                            <label class="form-check-label button-font" for="amherst">
                                Amherst
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="appomattox">
                            <label class="form-check-label button-font" for="appomattox">
                                Appomattox
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="augusta">
                            <label class="form-check-label button-font" for="augusta">
                                Augusta
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="bath">
                            <label class="form-check-label button-font" for="bath">
                                Bath
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="bedford">
                            <label class="form-check-label button-font" for="bedford">
                                Bedford
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="botetourt">
                            <label class="form-check-label button-font" for="botetourt">
                                Botetourt
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="brunswick">
                            <label class="form-check-label button-font" for="brunswick">
                                Brunswick
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="buchanan">
                            <label class="form-check-label button-font" for="buchanan">
                                Buchanan
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="buckingham">
                            <label class="form-check-label button-font" for="buckingham">
                                Buckingham
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="campbell">
                            <label class="form-check-label button-font" for="campbell">
                                Campbell
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="caroline">
                            <label class="form-check-label button-font" for="caroline">
                                Caroline
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="caroll">
                            <label class="form-check-label button-font" for="caroll">
                                Caroll
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="charles_city">
                            <label class="form-check-label button-font" for="charles_city">
                                Charles City
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="charlotte">
                            <label class="form-check-label button-font" for="charlotte">
                                Charlotte
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="chesapeake">
                            <label class="form-check-label button-font" for="chesapeake">
                                Chesapeake
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="chesterfield">
                            <label class="form-check-label button-font" for="chesterfield">
                                Chesterfield
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="clarke">
                            <label class="form-check-label button-font" for="clarke">
                                Clarke
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="culpeper">
                            <label class="form-check-label button-font" for="culpeper">
                                Culpeper
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="cumberland">
                            <label class="form-check-label button-font" for="cumberland">
                                Cumberland
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="dinwiddie">
                            <label class="form-check-label button-font" for="dinwiddie">
                                Dinwiddie
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="drakes_beach">
                            <label class="form-check-label button-font" for="drakes_beach">
                                Drakes Beach
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="essex">
                            <label class="form-check-label button-font" for="essex">
                                Essex
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="farmville">
                            <label class="form-check-label button-font" for="farmville">
                                Farmville
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="fauquier">
                            <label class="form-check-label button-font" for="fauquier">
                                Fauquier
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="fluvanna">
                            <label class="form-check-label button-font" for="fluvanna">
                                Fluvanna
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="franklin">
                            <label class="form-check-label button-font" for="franklin">
                                Franklin
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="frederick">
                            <label class="form-check-label button-font" for="frederick">
                                Frederick
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="front_royal">
                            <label class="form-check-label button-font" for="front_royal">
                                Front Royal
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="gloucester">
                            <label class="form-check-label button-font" for="gloucester">
                                Gloucester
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="goochland">
                            <label class="form-check-label button-font" for="goochland">
                                Goochland
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="greensville">
                            <label class="form-check-label button-font" for="greensville">
                                Greensville
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="gretna">
                            <label class="form-check-label button-font" for="gretna">
                                Gretna
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="halifax">
                            <label class="form-check-label button-font" for="halifax">
                                Halifax
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="halifax_(town)">
                            <label class="form-check-label button-font" for="halifax_(town)">
                                Halifax (Town)
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="hanover">
                            <label class="form-check-label button-font" for="hanover">
                                Hanover
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="harrisonburg">
                            <label class="form-check-label button-font" for="harrisonsburg">
                                Harrisonburg
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="henrico">
                            <label class="form-check-label button-font" for="henrico">
                                Henrico
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="henry">
                            <label class="form-check-label button-font" for="henry">
                                Henry
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="hurt">
                            <label class="form-check-label button-font" for="hurt">
                                Hurt
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="isle_of_wight">
                            <label class="form-check-label button-font" for="isle_of_wight">
                                Isle of Wight
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="james_city">
                            <label class="form-check-label button-font" for="james_city">
                                James City
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="king_and_queen">
                            <label class="form-check-label button-font" for="king_and_queen">
                                King and Queen
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="king_george">
                            <label class="form-check-label button-font" for="king_george">
                                King George
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="king_william">
                            <label class="form-check-label button-font" for="king_william">
                                King William
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="lancaster">
                            <label class="form-check-label button-font" for="lancaster">
                                Lancaster
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="loudon">
                            <label class="form-check-label button-font" for="loudon">
                                Loudon
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="louisa">
                            <label class="form-check-label button-font" for="louisa">
                                Louisa
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="lunenburg">
                            <label class="form-check-label button-font" for="lunenburg">
                                Lunenburg
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="madison">
                            <label class="form-check-label button-font" for="madison">
                                Madison
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="matthews">
                            <label class="form-check-label button-font" for="matthews">
                                Matthews
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="mecklenburg">
                            <label class="form-check-label button-font" for="mecklenburg">
                                Mecklenburg
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="middlesex">
                            <label class="form-check-label button-font" for="middlesex">
                                Middlesex
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="montgomery">
                            <label class="form-check-label button-font" for="montgomery">
                                Montgomery
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="mt._jackson">
                            <label class="form-check-label button-font" for="mt._jackson">
                                Mt. Jackson
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="nelson">
                            <label class="form-check-label button-font" for="nelson">
                                Nelson
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="new_kent">
                            <label class="form-check-label button-font" for="new_kent">
                                New Kent
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="norfolk">
                            <label class="form-check-label button-font" for="norfolk">
                                Norfolk
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="northampton">
                            <label class="form-check-label button-font" for="northampton">
                                Northampton
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="northumberland">
                            <label class="form-check-label button-font" for="northumberland">
                                Northumberland
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="orange">
                            <label class="form-check-label button-font" for="orange">
                                Orange
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="page">
                            <label class="form-check-label button-font" for="page">
                                Page
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="patrick">
                            <label class="form-check-label button-font" for="patrick">
                                Patrick
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="petersburg">
                            <label class="form-check-label button-font" for="petersburg">
                                Petersburg
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="pittsylvania">
                            <label class="form-check-label button-font" for="pittsylvania">
                                Pittsylvania
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="powhatan">
                            <label class="form-check-label button-font" for="powhatan">
                                Powhatan
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="prince_edward">
                            <label class="form-check-label button-font" for="prince_edward">
                                Prince Edward
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="prince_george">
                            <label class="form-check-label button-font" for="prince_george">
                                Prince George
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="prince_william">
                            <label class="form-check-label button-font" for="prince_william">
                                Prince William
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="pulsaki">
                            <label class="form-check-label button-font" for="pulsaki">
                                Pulsaki
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="pulsaki_(town)">
                            <label class="form-check-label button-font" for="pulsaki_(town)">
                                Pulsaki (Town)
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="richmond">
                            <label class="form-check-label button-font" for="richmond">
                                Richmond
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="Roanoke">
                            <label class="form-check-label button-font" for="Roanoke">
                                Roanoke
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="rockbridge">
                            <label class="form-check-label button-font" for="rockbridge">
                                Rockbridge
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="rockingham">
                            <label class="form-check-label button-font" for="rockingham">
                                Rockingham
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="salem">
                            <label class="form-check-label button-font" for="salem">
                                Salem
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="shenandoah">
                            <label class="form-check-label button-font" for="shenandoah">
                                Shenandoah
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="smyth">
                            <label class="form-check-label button-font" for="smyth">
                                Smyth
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="south_boston">
                            <label class="form-check-label button-font" for="south_boston">
                                South Boston
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="south_hill">
                            <label class="form-check-label button-font" for="south_hill">
                                South Hill
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="southampton">
                            <label class="form-check-label button-font" for="southampton">
                                Southampton
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="spotsylvania">
                            <label class="form-check-label button-font" for="spotsylvania">
                                Spotslyvania
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="stafford">
                            <label class="form-check-label button-font" for="stafford">
                                Stafford
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="staunton">
                            <label class="form-check-label button-font" for="staunton">
                                Staunton
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="suffolk">
                            <label class="form-check-label button-font" for="suffolk">
                                Suffolk
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="surry">
                            <label class="form-check-label button-font" for="surry">
                                Surry
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="sussex">
                            <label class="form-check-label button-font" for="sussex">
                                Sussex
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="tazewell">
                            <label class="form-check-label button-font" for="tazewell">
                                Tazwell
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="victoria">
                            <label class="form-check-label button-font" for="victoria">
                                Victoria
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="virginia_beach">
                            <label class="form-check-label button-font" for="virginia_beach">
                                Virginia Beach
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="washington">
                            <label class="form-check-label button-font" for="washington">
                                Washington
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="westmoreland">
                            <label class="form-check-label button-font" for="westmoreland">
                                Westmoreland
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="wise">
                            <label class="form-check-label button-font" for="wise">
                                Wise
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="wythe">
                            <label class="form-check-label button-font" for="wythe">
                                Wythe
                            </label>
                        </div>
                        <br>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input locality-box" type="checkbox" id="york">
                            <label class="form-check-label button-font" for="york">
                                York
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div style="line-height: 75%"><br></div>

            <div class="dropdown">
                <button class="btn btn-sm dropdown-toggle" style="width: 240px; text-align: left; border: 0.8px solid #000000; background-color: #ffffff;" data-toggle="dropdown">
                    &#160; Permit Status
                </button>
                <div class="dropdown-menu p-2" style="width: 240px;">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input status-box" type="checkbox" id="approved">
                        <label class="form-check-label button-font" for="approved">
                            Approved
                        </label>
                    </div>
                    <br>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input status-box" type="checkbox" id="denied">
                        <label class="form-check-label button-font" for="denied">
                            Denied
                        </label>
                    </div>
                    <br>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input status-box" type="checkbox" id="withdrawn">
                        <label class="form-check-label button-font" for="withdrawn">
                            Withdrawn
                        </label>
                    </div>
                    <br>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input status-box" type="checkbox" id="pending">
                        <label class="form-check-label button-font" for="pending">
                            Pending
                        </label>
                    </div>
                    <br>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input status-box" type="checkbox" value="" id="by-right">
                        <label class="form-check-label button-font" for="byright">
                            By-right
                        </label>
                    </div>
                </div>
            </div>

            <div style="line-height: 75%"><br></div>

            <div class="dropdown">
                <button class="btn btn-sm dropdown-toggle" style="width: 240px; text-align: left; border: 0.8px solid #000000; background-color: #ffffff;" data-toggle="dropdown">
                    &#160; Project Size
                </button>
                <div class="dropdown-menu p-2" style="width: 240px;">
                    <div class="form-check form-check-inline">
                        <input class="form-check-input size-box" type="checkbox" id="5mw">
                        <label class="form-check-label button-font" for="5mw">
                            &lt;5 MW
                        </label>
                    </div>
                    <br>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input size-box" type="checkbox" id="5mw20mw">
                        <label class="form-check-label button-font" for="5mw20mw">
                            5 MW - 20 MW
                        </label>
                    </div>
                    <br>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input size-box" type="checkbox" id="21mw150mw">
                        <label class="form-check-label button-font" for="21mw150mw">
                            21 MW - 150 MW
                        </label>
                    </div>
                    <br>
                    <div class="form-check form-check-inline">
                        <input class="form-check-input size-box" type="checkbox" id="150mw">
                        <label class="form-check-label button-font" for="150mw">
                            &gt;150 MW
                        </label>
                    </div>
                </div>
            </div>

            <br>

            <button class="filter-btn btn btn-light btn-sm" style="margin-right: 20px">Apply Filter(s)</button>

          </div>
          <div class="col-9">
            <style> #map { height: 400px; width: 818px } </style>
            <p class="card-text" id="map"></p>
          </div>
        </div>
    </div>

    <br>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 100%;">
        <div>
            {% autoescape off %}
                {{ mwPieChart_div }}
            {% endautoescape %}
        </div>
        <div>

        </div>
    </div>

    <br>

    <script>
        var map = L.map('map').setView([38.2, -79.2569], 7)

        let JSONData = JSON.parse(document.getElementById('data_json').textContent)

        let data = JSONData.map(item => {
            const capacity = parseFloat(item.latest_nameplate_capacity_per_local_action_mw_in_ac_field); 

            if (capacity < 5) {
                item.size = "5mw";
            } else if (capacity >= 5 && capacity < 20) {
                item.size = "5mw20mw";
            } else if (capacity >= 21 && capacity < 150) {
                item.size = "21mw150mw";
            } else if (capacity >= 150) {
                item.size = "150mw";
            }
            return item;
        });

        var mapBase = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 20,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        })

        var projectMarkers = L.layerGroup();
        mapBase.addTo(map);
        projectMarkers.addTo(map);

        function updateMarkers(filteredData) {
            projectMarkers.clearLayers();

            filteredData.forEach(data => {
                if (data.longitude !== null && data.latitude !== null) {
                    var projectMarker = L.marker([data.latitude, data.longitude])
                        .on('click', function() {
                            window.location.href = "/project/" + data.data_id;
                        })
                        .on('mouseover', function() {
                            projectMarker.bindPopup(data.project_name).openPopup();
                        })
                        .on('mouseout', function() {
                            projectMarker.closePopup();
                        });
                    
                    projectMarkers.addLayer(projectMarker);
                }
            });
        }

        updateMarkers(data);

        document.querySelector('.filter-btn').addEventListener('click', function() {
            let search = document.querySelector('.search-box input').value.toLowerCase();
            let statusList = Array.from(document.querySelectorAll('.status-box:checked')).map(checkbox => checkbox.id.toLowerCase());
            let localityList = Array.from(document.querySelectorAll('.locality-box:checked')).map(checkbox => checkbox.id.replace(/_/g, ' ').toLowerCase());
            let sizeList = Array.from(document.querySelectorAll('.size-box:checked')).map(checkbox => checkbox.id.toLowerCase());

            console.log(localityList)

            let filteredData = data.filter(item => 
                (!search || (item.project_name && item.project_name.toLowerCase().includes(search))) &&
                (statusList.length == 0 || (item.local_permit_status && statusList.includes(item.local_permit_status.toLowerCase()))) &&
                (localityList.length == 0 || (item.locality && localityList.includes(item.locality.toLowerCase()))) &&     
                (sizeList.length == 0 || (item.latest_nameplate_capacity_per_local_action_mw_in_ac_field && sizeList.includes(item.size)))
            );

            updateMarkers(filteredData);
        });
    </script>

{% endblock content %}
