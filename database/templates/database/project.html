{% extends "database/base.html" %}
{% block content %}
    <br><br>
    <button onclick="javascript:history.go(-1);" class="btn btn-light btn-sm">Back</button>
    <br><br>
    {% if object.project_name.strip %}
        <h4>{{ object.project_name }}</h4>
    {% else %}
        <h4>{{ object.project_phases }}</h4>
    {% endif %}

    {% if object.latitude is not None and object.longitude is not None %}
        <br>
        <style> #map { height: 350px; } </style>
        <div id="map"></div>

        {{ object.longitude|json_script:"longitude_json" }}
        {{ object.latitude|json_script:"latitude_json" }}

        <script>
            let longitude = Number(JSON.parse(document.getElementById('longitude_json').textContent))
            let latitude = Number(JSON.parse(document.getElementById('latitude_json').textContent))
            
            var map = L.map('map').setView([37.6, -78.6569], 7)

            L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 20,
                attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
            }).addTo(map)

            L.marker([latitude, longitude]).addTo(map)

        </script>
    {% endif %}

    <br>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 100%;">
        <div>
            <div class="card">
                <h6 class="card-header">
                    Project Overview
                </h6>
                <div class="card-body">
                    <div><b>Locality</b> <br> {{ object.locality }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Additional Localities</b> <br> {{ object.additional_localities }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Region</b> <br> {{ object.region}}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Local Permit Status</b> <br> {{ object.local_permit_status }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Date of Final Action</b> <br> {{ object.date_of_final_action }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Nameplate Capacity (Latest per Local Action/MW in AC)</b> <br> {{ object.latest_nameplate_capacity_per_local_action_mw_in_ac_field  }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Project Phases</b> <br> {{ object.project_phases  }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Phase Capacity (MW in AC)</b> <br> {{ object.phase_mw_in_ac_field }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Project Acreage (Best Available)</b> <br> {{ object.best_available_project_acreage }}</div>
                </div>
            </div>

            <br>

            <div class="card">
                <h6 class="card-header">
                    Additional Permitting Details
                </h6>
                <div class="card-body">
                    <div><b>Permit Number (DEQ)</b> <br> {{  object.deq_permit_number  }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Certificate Number (SCC)</b> <br> {{ object.scc_certificate_number }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Queue Number (PJM)</b> <br> {{ object.queue_pjm_field  }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Operating Status (EIA)</b> <br> {{ object.operating_status_eia_field }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Project Status (EIA)</b> <br> {{ object.project_status_eia_field }}</div>
                </div>
            </div>
        </div>
        <div>
            <div class="card">
                <h6 class="card-header">
                    Additional Project Details
                </h6>
                <div class="card-body">
                    <div><b>Alternative Name(s)</b> <br> {{ object.alternative_names }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Owner Developer (At Local Action)</b> <br> {{ object.owner_developer_at_local_action }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Location Description</b> <br> {{ object.location_description }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Siting Agreement Executed</b> <br> {{ object.siting_agreement_executed_field }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Siting Agreement Date</b> <br> {{ object.date_siting_agreement_executed_field }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Executed Siting Agreement</b> <br> 
                        {% if object.siting_agreement_link.strip %}
                            <a href="{{ object.siting_agreement_link }}" target="_blank"> External Link </a>
                        {% else %}
                            None 
                        {% endif %}
                    </div>
                    <div style="height: 12px;"></div>
                    <div><b>Energy Storage Onsite</b> <br> {{ object.energy_storage_onsite }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Energy Storage Capacity (MW)</b> <br> {{ object.energy_storage_capacity_mw_field  }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Shared Solar Program (Dominion)</b> <br> {{ object.shared_solar_program_enrollled_dominion_field }}</div>
                    <div style="height: 12px;"></div>
                    <div><b>Abandoned Mine Land (AML) Program</b> <br> {{ object.abandoned_mine_land_aml_program_funding_field }}</div>
                </div>
            </div>
        </div>
    </div>

    <br>

{% endblock content %}